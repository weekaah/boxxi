!function(){"use strict";function e(){var e=document.createDocumentFragment();this.container=t.make().appendTo(e).addClass("boxxi"),this.video=t.assign(this.video).appendTo(this.container).addClass("boxxi__video").onClick(i.bind(this)),this.controls=t.make().appendTo(this.container).addClass("boxxi__controls"),this.progress=t.make().appendTo(this.controls).addClass("boxxi__progress").onClick(d.bind(this)).onDrag(d.bind(this)),this.line=t.make().appendTo(this.progress).addClass("boxxi__progress-bar"),this.time=t.make().appendTo(this.controls).addClass("boxxi__btn boxxi--left boxxi__time"),this.toggle=t.make("button").appendTo(this.controls).addClass("boxxi__btn boxxi--left boxxi__toggle").addIcon(this.playIcon).addLabel(this.options.playLabel).onClick(i.bind(this)),this.stop=t.make("button").appendTo(this.controls).addClass("boxxi__btn boxxi--left boxxi__stop").addIcon(this.stopIcon).addLabel(this.options.stopLabel).onClick(o.bind(this)),this.mute=t.make("button").appendTo(this.controls).addClass("boxxi__btn boxxi--left boxxi__mute").addIcon(this.volumeHalfIcon).addLabel(this.options.muteLabel).onClick(s.bind(this)),this.rangecontainer=t.make().appendTo(this.controls).addClass("boxxi__range").addLabel(this.options.volumeLabel).onDrag(h.bind(this)),this.rangeline=t.make().appendTo(this.rangecontainer).addClass("boxxi__range-line"),this.rangefull=t.make().appendTo(this.rangecontainer).addClass("boxxi__range-full").onClick(h.bind(this)),this.full=t.make("button").appendTo(this.controls).addClass("boxxi__btn boxxi--right boxxi__full").addLabel(this.options.fullLabel).addIcon(this.fullIcon),document.body.appendChild(e)}function t(e){this.elem=e}function i(){var e,t,i=this,o=this.video.elem,n=this.toggle;o.paused?(o.play(),n.addIcon(this.pauseIcon),n.addLabel(this.options.pauseLabel),t=setInterval(function(){u.call(i)},1e3),e=setInterval(function(){r.call(i)},500)):(o.pause(),n.addIcon(this.playIcon),n.addLabel(this.options.playLabel),clearInterval(t),clearInterval(e))}function o(){var e=this,t=this.video.elem;t.currentTime=0,u.call(this),setTimeout(function(){t.pause(),e.toggle.addIcon(e.playIcon),e.toggle.addLabel(e.options.playLabel)},10)}function n(){this.container.toggleClass("boxxi--full"),this.fullScreen?(this.full.addIcon(this.fullIcon),this.full.addLabel(this.options.fullLabel)):(this.full.addIcon(this.exitfullIcon),this.full.addLabel(this.options.exitfullLabel)),this.fullScreen=!this.fullScreen}function s(){var e=this.video.elem,t=this.rangeline.elem;if(0!==e.volume)e.volume=0,t.style.width="0%";else{var i=0!=this.volumeLevel?this.volumeLevel:.5;e.volume=i,t.style.width=100*i+"%"}l.call(this)}function l(){var e=this.mute,t=this.video.elem.volume;0===t?(e.addIcon(this.muteIcon),e.addLabel(this.options.unmuteLabel)):0<t&&t<=.33?e.addIcon(this.volumeLowIcon):.33<t&&t<=.66?e.addIcon(this.volumeHalfIcon):t>.66&&(e.addIcon(this.volumeFullIcon),e.addLabel(this.options.muteLabel))}function a(e){e<0||(e<.1?(this.video.elem.volume=0,this.volumeLevel=0):e>.95?(this.video.elem.volume=1,this.volumeLevel=1):(this.video.elem.volume=e,this.volumeLevel=e))}function h(e){var t=Math.floor(e.offsetX/this.rangecontainer.elem.offsetWidth*100),i=t/100;i>1.01||(this.rangeline.elem.style.width=t+"%",a.call(this,i),l.call(this))}function d(e){var t=e.offsetX/this.progress.elem.offsetWidth*this.video.elem.duration;this.video.elem.currentTime=t,r.call(this)}function u(){var e=c(this.video.elem.currentTime),t=c(this.video.elem.duration);this.time.addIcon(e+" / "+t)}function r(){var e=this.video.elem.currentTime,t=this.video.elem.duration;this.line.elem.style.width=e/t*100+"%"}function c(e){var t=Math.floor(e),i=Math.floor(t/3600),o=Math.floor((t-3600*i)/60),n=t-3600*i-60*o;return i<10&&(i="0"+i),o<10&&(o="0"+o),n<10&&(n="0"+n),i+":"+o+":"+n}function v(e,t){var i;for(i in t)t.hasOwnProperty(i)&&(e[i]=t[i]);return e}function m(){var e=this,t=!1;document.activeElement;this.video.elem.addEventListener("mouseenter",function(){t=!0,document.activeElement.blur()}),this.container.elem.addEventListener("mouseout",function(){t=!1}),this.video.elem.addEventListener("contextmenu",function(e){e.preventDefault()}),window.addEventListener("keydown",function(o){t&&32===o.keyCode&&(o.preventDefault(),i.call(e))}),window.addEventListener("keydown",function(i){t&&123===i.keyCode&&n.call(e)}),this.full.elem.addEventListener("click",n.bind(this))}var p=function(e,t){this.container,this.video=e,this.volume=.5,this.playIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path d="M13 6L1 12V0l12 6z"/></svg>',this.pauseIcon='<svg id="Layer_1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path class="st0" d="M1 0h3v12H1V0zm9 0h3v12h-3V0z"/></svg>',this.stopIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path d="M1 0h12v12H1V0z"/></svg>',this.muteIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path opacity=".25" d="M0 8h3v4H0zM12 0h3v12h-3zM6 4h3v8H6z"/></svg>',this.volumeFullIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path d="M0 8h3v4H0V8zM6 4h3v8H6zM12 0h3v12h-3z"/></svg>',this.volumeHalfIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path d="M0 8h3v4H0V8zm6-4h3v8H6z"/><path opacity=".25" d="M12 0h3v12h-3z"/></svg>',this.volumeLowIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path d="M0 8h3v4H0V8z"/><path opacity=".25" d="M6 4h3v8H6zm6-4h3v12h-3z"/></svg>',this.fullIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path d="M3 5V2h3V0H1v5h2zm5-3h3v3h2V0H8v2zm3 5v3H8v2h5V7h-2zm-5 3H3V7H1v5h5v-2z"/></svg>',this.exitfullIcon='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 15 12"><path d="M4 0v3H1v2h5V0H4zm9 3h-3V0H8v5h5V3zm-3 9V9h3V7H8v5h2zM1 9h3v3h2V7H1v2z"/></svg>',this.defaults={playLabel:"Play video",pauseLabel:"Pause video",stopLabel:"Stop video",muteLabel:"Mute video",unmuteLabel:"Unmute video",volumeLabel:"Volume",fullLabel:"Full screen",exitfullLabel:"Exit full screen",autoPlay:!1},this.options=v(this.defaults,t),this.open()};p.prototype={open:function(){var t=this;e.call(this),m.call(this),setTimeout(function(){t.time.addIcon(c(0)+" / "+c(t.video.elem.duration))},500),this.options.autoPlay&&i.call(this)}},t.assign=function(e){return new t(e)},t.make=function(e){return new t(document.createElement(e||"div"))},t.prototype={addClass:function(e){var t=this.elem;return e.split(" ").forEach(function(e){t.classList.add(e)}),this},toggleClass:function(e){return this.elem.classList.toggle(e),this},addLabel:function(e){return this.elem.title=e,this},addIcon:function(e){return this.elem.innerHTML=e,this},appendTo:function(e){return e instanceof t?e.elem.appendChild(this.elem):e.appendChild(this.elem),this},addStyles:function(e){e=e||{};for(var t in e)e.hasOwnProperty(t)&&(this.elem.style[t]=e[t]);return this},onClick:function(e){return this.elem.addEventListener("click",e),this},onDrag:function(e){return this.elem.addEventListener("mousedown",function(t){e(t),this.parentNode.onmousemove=function(t){t.preventDefault(),e(t)}}),this.elem.addEventListener("mouseup",function(e){this.parentNode.onmousemove=null}),this.elem.addEventListener("mouseleave",function(e){this.parentNode.onmousemove=null}),this}},window.boxxi=function(e,t){var i=document.querySelectorAll(e);[].forEach.call(i,function(e){return new p(e,t)})}}();